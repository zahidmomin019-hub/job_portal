<!DOCTYPE html>
<html>
<head>
    <title>Applications</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>

<body class="bg-light">

<div class="container mt-5">

    <h3 class="mb-4">Job Applications</h3>

    {% if applications %}
        <ul class="list-group shadow">
        {% for app in applications %}
            <li class="list-group-item">

                <strong>Job:</strong> {{ app.job_title }} <br>
                <strong>Applicant:</strong> {{ app.applicant_name }} <br>

                <!-- STATUS SECTION -->
                <div class="mt-2">

                    {% if app.status == "Interview Scheduled" %}
                        <span class="badge bg-info">
                            Interview on {{ app.interview_date }}
                        </span>

                    {% elif app.status == "Selected" %}
                        <span class="badge bg-success">
                            Selected
                        </span>

                    {% elif app.status == "Rejected" %}
                        <span class="badge bg-danger">
                            Rejected
                        </span>

                    {% else %}
                        <span class="badge bg-secondary">
                            Applied
                        </span>
                    {% endif %}

                </div>

                <!-- ACTION BUTTONS -->
                <div class="mt-3">

                    {% if app.status not in ["Selected", "Rejected"] %}
                    
                        {% if app.status != "Interview Scheduled" %}
                            <a href="{{ url_for('schedule_interview', application_id=app['_id']) }}"
                               class="btn btn-warning btn-sm">
                               Schedule Interview
                            </a>
                        {% endif %}

                        <a href="{{ url_for('select_candidate', application_id=app['_id']) }}"
                           class="btn btn-success btn-sm">
                           Select
                        </a>

                        <a href="{{ url_for('reject_candidate', application_id=app['_id']) }}"
                           class="btn btn-danger btn-sm">
                           Reject
                        </a>

                    {% endif %}

                    <a href="{{ url_for('download_resume', filename=app.resume_filename) }}"
                       class="btn btn-primary btn-sm">
                       View Resume
                    </a>

                </div>

            </li>
        {% endfor %}
        </ul>
    {% else %}
        <div class="alert alert-info">
            No applications yet.
        </div>
    {% endif %}

    <br>

    <a href="{{ url_for('employer_dashboard') }}" 
       class="btn btn-secondary">
        Back to Dashboard
    </a>

</div>

</body>
</html>
